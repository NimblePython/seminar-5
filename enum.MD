# Перечисления (enum) в C++

Перечисления (enum) представляют собой способ определения пользовательских типов, которые содержат набор числовых констант. Перечисления позволяют удобно работать с набором именованных значений, вместо использования обычных чисел.

## Форма объявления перечисления

```cpp
enum class имя_перечисления { константа_1, константа_2, ... константа_N };
```

Пример простейшего перечисления:

```cpp
enum class Day { Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, Sunday };
```

В этом примере перечисление `Day` представляет дни недели. Каждая константа по умолчанию получает числовое значение, начиная с 0. То есть, `Monday` будет иметь значение 0, `Tuesday` — 1, и так далее до `Sunday`, которое будет равно 6.

## Использование переменной перечисления

```cpp
Day today = Day::Thursday;
```

Здесь переменной `today` присваивается значение `Day::Thursday`.

Чтобы вывести числовое значение перечисления на экран:

```cpp
std::cout << "Today: " << static_cast<int>(today) << std::endl;
```

Результат будет: `Today: 3`, так как `Thursday` — это четвертый день, и его числовое значение равно 3.

## Задание начальных значений

Можно задать значение для первой константы, тогда последующие будут увеличиваться автоматически:

```cpp
enum class Day { Monday = 1, Tuesday, Wednesday, Thursday, Friday, Saturday, Sunday };
```

В данном случае, `Monday` имеет значение 1, `Tuesday` — 2, и так далее.

## Присвоение одинаковых значений

Можно присваивать одинаковые значения нескольким константам:

```cpp
enum class Day { Monday = 1, Mon = 1, Tuesday, Wednesday, Thursday, Friday, Saturday, Sunday };
```

Здесь константы `Monday` и `Mon` имеют одно и то же значение.

## Индивидуальные значения констант

```cpp
enum class Day { Monday = 1, Tuesday = 5, Wednesday, Thursday, Friday, Saturday, Sunday = 1 };
```

Здесь `Tuesday` будет иметь значение 5, `Wednesday` — 6, а `Sunday` снова равно 1.

## Пример использования перечисления с арифметическими операциями

```cpp
#include <iostream>

enum class Operation { Add, Subtract, Multiply };

void calculate(int n1, int n2, Operation op) {
    switch (op) {
        case Operation::Add:
            std::cout << n1 + n2 << std::endl;
            break;
        case Operation::Subtract:
            std::cout << n1 - n2 << std::endl;
            break;
        case Operation::Multiply:
            std::cout << n1 * n2 << std::endl;
            break;
    }
}

int main() {
    calculate(10, 6, Operation::Add);        // 16
    calculate(10, 6, Operation::Subtract);   // 4
    calculate(10, 6, Operation::Multiply);   // 60
}
```

Этот пример показывает использование перечисления `Operation` для хранения операций, которые передаются в функцию `calculate`.

## Подключение констант перечисления

Начиная с C++20, с помощью оператора `using` можно импортировать константы перечисления в текущую область видимости:

```cpp
using enum Day;
```

Теперь можно использовать константы без явного указания их принадлежности к перечислению:

```cpp
Day today = Thursday;
std::cout << static_cast<int>(today) << std::endl;  // 3
```

## Перечисления в C-стиле

В C++ также используются перечисления без ключевого слова `class`, они пришли из языка C:

```cpp
enum Day { Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, Sunday };
```

Это unscoped перечисления, которые не ограничены пространством имен, и хотя они до сих пор используются, они могут привести к большему количеству ошибок, чем `enum class`.

Unscoped перечисления (перечисления без `class`) не ограничены пространством имен и могут вызывать конфликты имен, поскольку их константы попадают в общую область видимости. Например, если в программе есть несколько перечислений с одинаковыми именами констант, это может привести к ошибкам.

В отличие от этого, перечисления, объявленные с использованием `enum class`, ограничивают свои константы конкретным пространством имен, что делает их более безопасными и удобными в использовании, поскольку они предотвращают конфликты имен и увеличивают ясность кода.

Несмотря на то, что unscoped перечисления до сих пор используются, они чаще приводят к большему количеству ошибок из-за отсутствия такой строгой изоляции имен, как у `enum class`. Поэтому использование `enum class` предпочтительнее в большинстве случаев, особенно в современном C++.

Перечисления являются мощным инструментом, который помогает улучшить читаемость кода и уменьшить вероятность ошибок, связанных с использованием "магических чисел".
